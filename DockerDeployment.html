<!doctype html>
<html class="no-js" lang="en">

<head>
    <!-- meta data -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!--font-family-->
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">

    <!-- title of site -->
    <title>KV</title>

    <!-- For favicon png -->
    <link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png" />

    <!--font-awesome.min.css-->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">

    <!--flat icon css-->
    <link rel="stylesheet" href="assets/css/flaticon.css">

    <!--animate.css-->
    <link rel="stylesheet" href="assets/css/animate.css">

    <!--owl.carousel.css-->
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">

    <!--bootstrap.min.css-->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">

    <!-- bootsnav -->
    <link rel="stylesheet" href="assets/css/bootsnav.css">

    <!--style.css-->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--responsive.css-->
    <link rel="stylesheet" href="assets/css/responsive.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .project-container {
            max-width: 1300px;
            margin: 130px 40px;
            padding: 0 20px;
        }

        h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            color: #555;
            font-size: 2em;
            margin-top: 20px;
        }

        h3 {
            color: #555;
            font-size: 1.6em;
            margin-top: 20px;
        }

        p {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .project-header {
            border-bottom: 2px solid #e2e2e2;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .project-details {
            margin-bottom: 40px;
        }

        .project-description {
            margin-bottom: 20px;
        }

        .code-container {
    background-color: white;
    border-radius: 5px;
    padding: 20px;
    width: fit-content;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
    align-items: center;
    
}

pre {
    margin: 0;
    font-size: 14px;
    line-height: 1.1;
    overflow: auto;
    text-align: left;
}

code {
    font-family: Consolas, 'Courier New', monospace;
    color: #333;
    display: block;
}




    </style>

</head>

<body>
    <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
    <![endif]-->

    <!-- top-area Start -->
    <header class="top-area">
        <div class="header-area">
            <!-- Start Navigation -->
            <nav class="navbar navbar-default bootsnav navbar-fixed dark no-background">

                <div class="container">

                    <!-- Start Header Navigation -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                            <i class="fa fa-bars"></i>
                        </button>
                        <a class="navbar-brand" href="index.html">Kanthivardhan K</a>
                    </div>
                    <!--/.navbar-header-->
                    <!-- End Header Navigation -->

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
                        <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                            <li class=" smooth-menu active"></li>
                            <li class=" smooth-menu"><a href="index.html#education">education</a></li>
                            <li class="smooth-menu"><a href="index.html#skills">skills</a></li>
                            <li class="smooth-menu"><a href="index.html#experience">experience</a></li>
                            <!--<li class="smooth-menu"><a href="index.html#profiles">profile</a></li>-->
                            <li class="smooth-menu"><a href="index.html#projects">projects</a></li>
                            <li class="smooth-menu"><a href="index.html#Blog">Achievements</a></li>
                            <li class="smooth-menu"><a href="index.html#profiles">profiles</a></li>
                            <li class="smooth-menu"><a href="index.html#contact">contact</a></li>
                        </ul>
                        <!--/.nav -->
                    </div>
                    <!-- /.navbar-collapse -->
                </div>
                <!--/.container-->
            </nav>
            <!--/nav-->
            <!-- End Navigation -->
        </div>
        <!--/.header-area-->

        <div class="clearfix"></div>

    </header>
    <!-- /.top-area-->

    <section id="project">
        <div class="project-container">
            <div class="project-header">
                <h1>DOCKER DEPLOYMENT</h1>
            </div>
            <div class="project-details">
                <pre><code><h6>

                Project Overview

                    The document outlines a CI/CD pipeline using Git, Jenkins, Docker, and AWS. It begins with setting up a Git server to host the code,creating a 
                    Dockerfile, and configuring a Jenkins pipeline to build, test, and push Docker images to Docker Hub. An EC2 instance is set up as a Docker 
                    server to pulland run the images. Automation is achieved through SCM polling and linking CI and CD jobs, ensuring seamless integration and 
                    deployment. The final application is accessible via the Docker server's public IP.
				
                </h6></code></pre>
            </div>
                <img src="assets/images/project/img_p2_24.png" alt="Project Image" style="display: block; margin: 0 auto;"><br>
                <pre><code>
                    <h3>Technologies Used</h3>
                    <h6>
        Git     - For version control for tracking changes in the code files
        Maven   – For Continuous Build
        Jenkins - For continuous integration and continuous deployment
        Docker  - containerization</h6>
                    </code></pre>
                
                <h3>Description</h3><br>
                <pre><code><p>
                Create an EC2 instance with below properties for GitServer (developers machine)
                    
                    Launch git server for developer
                        Name git-server
                        Ami amazon-linux
                        Instance type t2.micro
                        Key-pair
                        Security groups 22,80 ports
                        Storage 8 Gi
                        Connect to git-server(ssh client(mobaxtrem))

                    Install and config git using the below commands
                        yum install git -y
                        git config --global user.name "kv"
                        git config --global user.email "kv@gmail.com"
                        git –version
                        git config --list

</p></code></pre>
<br>
<pre><code><p>

                Create passwordless ssh connection

                Clone the Forfillapp repository
                Inside the Dockerfile Paste the following commands
                        FROM tomcat:latest
                        RUN cp -R /usr/local/tomcat/webapps.dist/* /usr/local/tomcat/webapps/
                        COPY webapp/target/*.war /usr/local/tomcat/webapps/

                Push the code to the central repository (github)

</p></code></pre>   <br>
                    <!--<strong>Jenkins</strong> t2.medium | 8Gb RAM | Ubuntu 22.04 LTS<br>
                    <strong>SonarQube</strong> t2.medium | 8Gb RAM  | Ubuntu 22.04 LTS<br>
                    <strong>Nexus3</strong> t2.medium | 10Gb RAM  | Cento OS 9/7</p><br>-->
                <pre><code><p>
                Setup Jenkins server
                    Install git
                    Download and Install maven
                    Install java-17*
                    Install docker -> yum install docker -y
                    Configure java and maven path in .bash_profile
                    Start the Jenkins and docker service
                    
                Connect to Jenkins dashboard (Jenkins public ip : 8080)
                    Install plugins 
                    maven invoker
                    maven integration
                    pipeline
                    pipeline:stageview
                    docker in Manage Jenkins > Plugins
                    
                Create a pipeline job name CI
                    Inside pipeline script add the following script
                    
                </p></code></pre><br>
            
                <pre><code><p>
                    pipeline {
                        agent any
                        tools {
                            maven 'M2_HOME'
                            jdk 'JAVA_HOME'
                        }
                        environment {
                            REGISTRY_CREDENTIALS = credentials('docker-cred') // Jenkins credentials ID for Docker
                            DOCKER_REGISTRY_URL = 'docker.io'
                            IMAGE_NAME = 'kanthivardhan/formimg:v1' // Full image path with tag
                        }
                        stages {
                            stage('Git Clone') {
                                steps {
                                    git changelog: false, poll: false, url: ' https://github.com/KanthivardhanK/FormFillApp.git', branch: 'main'
                                }
                            }
                            stage('Compile') {
                                steps {
                                    sh 'mvn clean compile'
                                }
                            }
                            stage('Build') {
                                steps {
                                    sh 'mvn clean install'
                                }
                            }
                            stage('Docker Login') {
                                steps {
                                    sh "docker login -u ${REGISTRY_CREDENTIALS_USR} -p ${REGISTRY_CREDENTIALS_PSW} ${DOCKER_REGISTRY_URL}"
                                }
                            }
                            stage('Build Docker Image') {
                                steps {
                                    sh "docker build -t ${IMAGE_NAME} ."
                                }
                            }
                            stage('Push Docker Image') {
                                steps {
                                    sh "docker push ${IMAGE_NAME}"
                                }
                            }
                        }
                    }
                    </p>
                </code></pre>
            
            <div class="project-description"></div>
            <img src="assets/images/project/img_p2_1.png" alt="Project Image" style="display: block; margin: auto;">
<br>
            <!--<p>install git, maven & docker</p>-->
            <div class="code-container">
                <pre><code>
                    <p>Before configure the java, maven, git paths in Jenkins>manage Jenkins>tools
                Add credentials in manage Jenkins>security>global> add username with password, give username and password and id as docker-cred
                    
                “sudo usermod -aG docker Jenkins” in jenkins
                    
                Now build the job</p>
                    
                </code></pre>
            </div>
          <!--  <h3>Setup SonarQube server</h3><br>
            <p><strong>Install Prerequisites:</strong> Update packages and install OpenJDK 17 and PostgreSQL.<br>
               <strong>Configure PostgreSQL:</strong> Create a database and user for SonarQube.<br>
               <strong>Download SonarQube:</strong> Get SonarQube from the official website and extract it.<br>
               <strong>Configure SonarQube:</strong> Update sonar.properties with your database details.<br>
               <strong>Start SonarQube:</strong> Navigate to the SonarQube directory and start the service.<br><br>
                Visit the <a href="https://github.com/pinnnacl/Installation_guide/blob/main/SonarQube_setup" target="_blank" style="color: #ff5733; font-weight: bold; text-decoration: none; background-color: #e0e0e0; padding: 5px 10px; border-radius: 5px;">LINK</a>
                to get installtion procedure <br>-->
                <img src="assets/images/project/img_p2_2.png" alt="Project Image" style="display: block; margin: 0 auto;"><br>
                <img src="assets/images/project/img_p2_21.png" alt="Project Image" style="display: block; margin: 0 auto;"><br>
                <div class="code-container">
                    <pre><code>
                        <p>After building the job 
                            1-github repository will be cloned
                            2-code will be compiled
                            3-warfile is created
                            4-logging to dockerhub
                            5-building dockerimage
                            6-pushing dockerimage to dockerhub
                            </p>
                    </code></pre>
              <!--  <strong>Install Java:</strong> Ensure Java is installed (sudo apt-get install openjdk-11-jdk).<br>
               <strong>Create Nexus User: </strong> Create a new user (sudo adduser nexus) and grant permissions.<br>
               <strong>Configure Nexus:</strong> Edit the Nexus configuration file to specify the installation directory:<br>
               <strong>Start Nexus: </strong> sudo -u nexus /opt/nexus-latest/bin/nexus start<br>
               <strong>Access Nexus Repository Manager: </strong> Open a web browser and navigate to http://your-server-ip:8081. You should see the Nexus Repository Manager web interface.<br><br>
               Visit the <a href="https://github.com/pinnnacl/Installation_guide/blob/main/nexus_setup" target="_blank" style="color: #ff5733; font-weight: bold; text-decoration: none; background-color: #e0e0e0; padding: 5px 10px; border-radius: 5px;">github</a> to get installtion procedure or refer: <a href="https://dev.to/mesadhan/install-nexus-repository-manager-linux-in-centos7-deploy-and-use-jar-4bge" target="_blank" style="color: #ff5733; font-weight: bold; text-decoration: none; background-color: #e0e0e0; padding: 5px 10px; border-radius: 5px;">link</a><br><br>--><br><br>
               <img src="assets/images/project/img_p2_15.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
               <!--<strong>Create respository</strong><br><br>-->
               <pre><code>
                <p>CD

                    Launch an ec2 server with following configuration
                    Name: docker server
                    Instance type : t2.micro
                    Security group ports: 80, 22, 8080
                    Volume: 8 Gi
                    
                    Connect to instance
                    Install docker 
                        Yum install docker -y
                        Service docker start
                    
                    Vi /etc/ssh/sshd_reload
                        passwordAuthentication yes
                        permitrootlogin yes
                    service sshd reload
                    
                    passwd root
                    .
                    
                    Connecting docker server with Jenkins server
                    In Jenkins dashboard>manage Jenkins>system>add ssh server and give the details as below
                    
                    </p>
            </code></pre><br><br>
               <img src="assets/images/project/img_p2_17.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
               <pre><code>
                <h6>
    CD Job

        And test configuration

        Create a job CD

        Post build actions> build artifacts over ssh> Name> select docker-host> in Exec command

        docker run -d --name formapp -p 8081:8080 kanthivardhan/formimg:v1

        and save

                    
                    </h6>
            </code></pre><br><br>
               <img src="assets/images/project/img_p2_18.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>    
               <pre><code>
                <h6>
                    run the job

                    when job is triggered image will be pulled from docker hub
                    container is created
                                        </h6>
            </code></pre><br><br>
               
            <img src="assets/images/project/img_p2_4.png" alt="Project Image" style="display: block; margin: 0 auto;"><br>
            <pre><code>
                <h6>
                    accessing application
                    copy docker server publicip:8081/webapp
                                        </h6>
            </code></pre><br><br>
            <img src="assets/images/project/img_p2_5.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <!--<h3>integrate SonarQube with Jenkins Pipeline</h3><br>
            <strong>Install Jenkins Plugin -</strong> SonarQube Scanner<br>-->
            <pre><code>
                <h6>
                    Automating the CI/CD
                    In CI job
                    
                    Select poll scm
                    In the box provided give * * * * *

                    Poll scm means whenever code is modified in github automatically the job will be triggered in jenkins
                    
                    * * * * * means 
                        Minute (0-59)
                        Hour (0-23)
                        Day of the Month (1-31)
                        Month (1-12)
                        Day of the Week (0-7, where both 0 and 7 represent Sunday) 
                </h6>
            </code></pre><br><br>
            <img src="assets/images/project/img_p2_6.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <img src="assets/images/project/img_p2_7.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <pre><code>
                <h6>
                        Linking the two jobs
                        In CD> configure> build after projects are built>Projects to watch> CI
                </h6>
            </code></pre><br><br>
            <img src="assets/images/project/img_p2_8.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <pre><code>
                <h6>
                    Whenever new code or code into GitHub is added/modified,

                    1-automatically CI job will be triggered
                            1a-code will be cloned
                            1b-build the war file
                            1c-creating image including the war file
                            1d-login to docker hub
                            1e-push the image to docker hub

                    2-after the CI job is completed immediately CD job will be triggered
                            2a-docker image will be pulled from docker hub
                            2b-docker container will be created

                    3-finally we can access the website  at docker-server public ip :8081/webapp
                </h6>
            </code></pre><br><br>
           <!-- <div class="code-container">
                <pre><code>
stage('Sonar Analysis') {
    environment {
        scannerHome = tool 'sonar4.7'
    }
    steps {
        withSonarQubeEnv('sonar') {
            sh '''${scannerHome}/bin/sonar-scanner -Dsonar.projectKey=vprofile \
            -Dsonar.projectName=vprofile \
            -Dsonar.projectVersion=1.0 \
            -Dsonar.sources=src/ \
            -Dsonar.java.binaries=target/test-classes/com/visualpathit/account/controllerTest/ \
            -Dsonar.junit.reportsPath=target/surefire-reports/ \
            -Dsonar.jacoco.reportsPath=target/jacoco.exec \
            -Dsonar.java.checkstyle.reportPaths=target/checkstyle-result.xml'''
        }
    }
}
                </code></pre>
            </div>-->
            <img src="assets/images/project/img_p2_9.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <img src="assets/images/project/img_p2_10.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <img src="assets/images/project/img_p2_11.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <img src="assets/images/project/img_p2_12.png" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
           <!-- SonarQube server will send the information of the quality check through webhook<br>
             
            <img src="assets/images/project/img_p2_13.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            Add below stage to the pipeline.
            <div class="code-container">
                <pre><code>
stage("Quality Gate") {
    steps {
        timeout(time: 1, unit: 'HOURS') {
            // Parameter indicates whether to set pipeline to UNSTABLE if Quality Gate fails
            // true = set pipeline to UNSTABLE, false = don't
            waitForQualityGate abortPipeline: true
        }
    }
}            
                </code></pre>
            </div>
            <img src="assets/images/project/img_p2_14.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
            <h3>integrate NEXUS with Jenkins Pipeline</h3><br>
                        <img src="assets/images/project/img_p2_19.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        <img src="assets/images/project/img_p2_20.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        Install Build timestamp plugin for versioning.<br><br>
               <strong>Create pipeline stage for Nexus</strong>
        <div class="code-container">
            <pre><code>
stage('Upload Artifact') {
    steps {
        nexusArtifactUploader(
            nexusVersion: 'nexus3',
            protocol: 'http',
            nexusUrl: '172.31.25.217:8081',
            groupId: 'QA',
            version: "${env.BUILD_ID}-${env.BUILD_TIMESTAMP}",
            repository: 'vprofile_artifacts',
            credentialsId: 'nexuslogin',
            artifacts: [
                [
                    artifactId: 'vproapp',
                    classifier: '',
                    file: 'target/vprofile-v2.war',
                    type: 'war'
                ]
            ]
        )
    }
    post {
        success {
            echo "Artifact uploaded successfully."
        }
        failure {
            echo "Artifact upload failed."
        }
    }
}                 
            </code></pre>
        </div>-->
       <!-- <img src="assets/images/project/img_p2_22.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        <img src="assets/images/project/img_p2_23.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        <h3>integrate Slack with Jenkins pipeline</h3><br><br>
        <strong>Install Jnekins plugin: </strong> Slack Notification<br><br>
        Navigate to https://app.slack.com/ , Create a workspace<br><br>
        
        <img src="assets/images/project/img_p2_25.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        <img src="assets/images/project/img_p2_26.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        <img src="assets/images/project/img_p2_27.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
                <img src="assets/images/project/img_p2_28.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>
        Write Jenkins pipeline stage.-->
        <!--<div class="code-container">
            <pre><code>
#outside the pipeline code 
def COLOR_MAP = [
	'SUCCESS': 'good',
	'FAILUER': 'dager',
]

post {
	always {
		echo 'Slack Notifications.'
		slackSend channel: '#jenkinscicd',
			color: COLOR_MAP[currentBuild.currentResult],
			message: "*${currentBuild.currentResult}:* Job ${env.JOB_NAME} build ${env.BUILD_NUMBER} \n More info at: ${env.BUILD_URL}"
	}
}
            </code></pre>
        </div>
        <img src="assets/images/project/img_p2_29.jpg" alt="Project Image" style="display: block; margin: 0 auto;"><br><br>

    </p>    
            </div>-->
            <!-- Footer -->
<!--<footer style="background-color: #333; color: #fff; padding: 20px 0; text-align: center;">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <p>&copy; 2024 Nandu. All rights reserved.</p>
            </div>
            <div class="col-md-6">
                <ul style="list-style: none; padding: 0; margin: 0;">
                    <li style="display: inline; margin: 0 10px;"><a href="mailto:info@example.com" style="color: #fff; text-decoration: none;">Contact</a></li>
                    <li style="display: inline; margin: 0 10px;"><a href="privacy-policy.html" style="color: #fff; text-decoration: none;">Privacy Policy</a></li>
                    <li style="display: inline; margin: 0 10px;"><a href="terms-of-service.html" style="color: #fff; text-decoration: none;">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="social-media" style="margin-top: 10px;">
            <a href="https://facebook.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-facebook"></i></a>
            <a href="https://twitter.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-twitter"></i></a>
            <a href="https://linkedin.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-linkedin"></i></a>
            <a href="https://github.com" target="_blank" style="color: #fff; margin: 0 5px;"><i class="fa fa-github"></i></a>
        </div>
    </div>
</footer>-->
<!-- End Footer -->

<!-- Include Font Awesome for social media icons -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
